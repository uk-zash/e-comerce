<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Shop | Category</title>
    <link rel="stylesheet" href="/css/nav.css" />
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-50">

    <!-- Navbar (optional) -->
    <%- include('partials/navbar') %>

    <!-- Main Section (Product Grid) -->
    <main class="container mx-auto px-4 py-8">

        <!-- Category Dropdown -->
        <div class="mb-4">
            <select onchange="window.location.href = '/main/shop?category=' + this.value" class="bg-gray-100 p-2 rounded-md sm:w-48 lg:w-64 xl:w-80">
                <option value="">All Categories</option>
                <% categories.forEach(category => { %>
                    <option value="<%= category.id %>" <%= selectedCategoryId == category.id ? 'selected' : '' %>>
                        <%= category.name %>
                    </option>
                <% }); %>
            </select>
        </div>

        <!-- Filtered Products Section -->
        <div class="bg-white mb-12">
            <div class="mx-auto max-w-2xl px-4 py-4 sm:px-6 sm:py-4 lg:max-w-7xl lg:px-8">
                <h2 class="text-2xl text-center font-bold text-gray-800 mb-6">Products</h2>

                <!-- Products Grid -->
                <div class="grid grid-cols-2 gap-x-6 gap-y-10 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 xl:gap-x-8">
                    <% filterdProducts.forEach(product => { %>
                    <div class="group">
                        <img src="<%= product.image %>" alt="<%= product.name %>" class="aspect-square w-full rounded-lg bg-gray-200 object-cover group-hover:opacity-75">
                        <h3 class="mt-4 text-sm text-gray-700 truncate"><%= product.name %></h3>
                        <p class="mt-1 text-xl font-bold text-gray-900">₹<%= new Intl.NumberFormat('en-IN').format(product.price) %></p>
                    </div>
                    <% }); %>
                </div>
            </div>
        </div>

        <!-- Display other products for recommendation -->
        <h3 class="text-2xl font-semibold mt-12 text-center">Other Products You May Like</h3>
        <div class="grid grid-cols-2 gap-x-6 gap-y-10 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 xl:gap-x-8 mt-4">
            <% otherProducts.forEach(product => { %>
            <div class="group">
                <img src="<%= product.image %>" alt="<%= product.name %>" class="aspect-square w-full rounded-lg bg-gray-200 object-cover group-hover:opacity-75">
                <h3 class="mt-4 text-sm text-gray-700 truncate"><%= product.name %></h3>
                <p class="mt-1 text-xl font-bold text-gray-900">₹<%= new Intl.NumberFormat('en-IN').format(product.price) %></p>
            </div>
            <% }); %>
        </div>
    </main>

    <!-- Footer -->
    <%- include('partials/footer') %>

    <script src="/js/nav.js"></script>
</body>
</html>
